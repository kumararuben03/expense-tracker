{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Chart as ChartJS}from\"chart.js\";import{Pie}from\"react-chartjs-2\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(){const[summary,setSummary]=useState({totalIncome:0,totalExpense:0,byCategory:{}});const[error,setError]=useState(null);// Fetch dashboard summary from backend\nconst fetchSummary=()=>{axios.get(\"/api/reports/summary\").then(r=>{setSummary(r.data||{totalIncome:0,totalExpense:0,byCategory:{}});setError(null);}).catch(err=>{console.error(\"Error fetching reports:\",err);setError(\"Failed to load report data\");});};useEffect(()=>{fetchSummary();// Listen for custom event when transaction is added/removed\nwindow.addEventListener(\"transactionUpdated\",fetchSummary);return()=>window.removeEventListener(\"transactionUpdated\",fetchSummary);},[]);const pieData={labels:Object.keys(summary.byCategory||{}),datasets:[{label:\"Expenses by Category\",data:Object.values(summary.byCategory||{}),backgroundColor:[\"#60A5FA\",\"#F97316\",\"#34D399\",\"#F472B6\",\"#FBBF24\"],borderColor:[\"#1E40AF\",\"#C2410C\",\"#059669\",\"#BE185D\",\"#92400E\"],borderWidth:2}]};const chartOptions={responsive:true,maintainAspectRatio:true,plugins:{legend:{position:\"bottom\"}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Dashboard\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 mb-4\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-green-50 rounded\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Total Income\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-green-600\",children:[\"$\",(summary.totalIncome||0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-red-50 rounded\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Total Expense\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-red-600\",children:[\"$\",(summary.totalExpense||0).toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold mb-3\",children:\"Expenses by Category\"}),Object.keys(summary.byCategory||{}).length>0?/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:350,margin:\"0 auto\"},children:/*#__PURE__*/_jsx(Pie,{data:pieData,options:chartOptions})}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-center py-6\",children:\"No expense data yet\"})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Chart","ChartJS","Pie","axios","jsx","_jsx","jsxs","_jsxs","Dashboard","summary","setSummary","totalIncome","totalExpense","byCategory","error","setError","fetchSummary","get","then","r","data","catch","err","console","window","addEventListener","removeEventListener","pieData","labels","Object","keys","datasets","label","values","backgroundColor","borderColor","borderWidth","chartOptions","responsive","maintainAspectRatio","plugins","legend","position","className","children","toFixed","length","style","maxWidth","margin","options"],"sources":["C:/Users/LEGION/Downloads/Projects/Expense Tracker/frontend/src/pages/Dashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Chart as ChartJS } from \"chart.js\";\r\nimport { Pie } from \"react-chartjs-2\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Dashboard() {\r\n  const [summary, setSummary] = useState({\r\n    totalIncome: 0,\r\n    totalExpense: 0,\r\n    byCategory: {},\r\n  });\r\n  const [error, setError] = useState(null);\r\n\r\n  // Fetch dashboard summary from backend\r\n  const fetchSummary = () => {\r\n    axios\r\n      .get(\"/api/reports/summary\")\r\n      .then((r) => {\r\n        setSummary(\r\n          r.data || { totalIncome: 0, totalExpense: 0, byCategory: {} }\r\n        );\r\n        setError(null);\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Error fetching reports:\", err);\r\n        setError(\"Failed to load report data\");\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchSummary();\r\n    // Listen for custom event when transaction is added/removed\r\n    window.addEventListener(\"transactionUpdated\", fetchSummary);\r\n    return () => window.removeEventListener(\"transactionUpdated\", fetchSummary);\r\n  }, []);\r\n\r\n  const pieData = {\r\n    labels: Object.keys(summary.byCategory || {}),\r\n    datasets: [\r\n      {\r\n        label: \"Expenses by Category\",\r\n        data: Object.values(summary.byCategory || {}),\r\n        backgroundColor: [\r\n          \"#60A5FA\",\r\n          \"#F97316\",\r\n          \"#34D399\",\r\n          \"#F472B6\",\r\n          \"#FBBF24\",\r\n        ],\r\n        borderColor: [\"#1E40AF\", \"#C2410C\", \"#059669\", \"#BE185D\", \"#92400E\"],\r\n        borderWidth: 2,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: true,\r\n    plugins: {\r\n      legend: {\r\n        position: \"bottom\",\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white p-6 rounded shadow\">\r\n      <h2 className=\"text-xl font-semibold mb-4\">Dashboard</h2>\r\n      {error && <div className=\"text-red-600 mb-4\">{error}</div>}\r\n      <div className=\"grid grid-cols-2 gap-4 mb-6\">\r\n        <div className=\"p-4 bg-green-50 rounded\">\r\n          <p className=\"text-sm text-gray-600\">Total Income</p>\r\n          <p className=\"text-2xl font-bold text-green-600\">\r\n            ${(summary.totalIncome || 0).toFixed(2)}\r\n          </p>\r\n        </div>\r\n        <div className=\"p-4 bg-red-50 rounded\">\r\n          <p className=\"text-sm text-gray-600\">Total Expense</p>\r\n          <p className=\"text-2xl font-bold text-red-600\">\r\n            ${(summary.totalExpense || 0).toFixed(2)}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <h3 className=\"text-sm font-semibold mb-3\">Expenses by Category</h3>\r\n        {Object.keys(summary.byCategory || {}).length > 0 ? (\r\n          <div style={{ maxWidth: 350, margin: \"0 auto\" }}>\r\n            <Pie data={pieData} options={chartOptions} />\r\n          </div>\r\n        ) : (\r\n          <p className=\"text-gray-400 text-center py-6\">No expense data yet</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}